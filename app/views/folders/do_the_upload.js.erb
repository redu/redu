<%= remotipart_response do %>
  $('.errorMessageField').remove();

  <% if @myfile.valid? %>
    <%= render partial: "index", locals: { space: @space, folder: @folder,
        folders: @folders, can_update: @can_update, can_delete: @can_delete,
        myfiles: @myfiles, myfile: @myfile } %>
  <% else %>
    var $error = $("<div class='errorMessageField'>");
    <% if !@myfile.errors[:attachment_file_name].empty? %>
      $error.html("Já existe um arquivo com este nome.");
    <% elsif !@myfile.errors[:attachment].empty? %>
      $error.html("Arquivo muito grande. Tamanho máximo é 100mb.");
    <% else %>
      $error.html("Formato de arquivo inválido.");
    <% end %>
    $(".new-file-inner form").prepend($error);
  <% end %>
<% end %>